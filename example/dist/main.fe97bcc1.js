parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"S3PC":[function(require,module,exports) {
"use strict";function a(a,t){var e=t.size,o=void 0===e?1:e,n=t.rect,r=void 0===n?null:n,i=t.reverse,h=void 0!==i&&i,g=document.createElement("canvas"),d=g.getContext("2d"),c=new Image,s=a.match(".+/(.+?)([?#;].*)?$")[1],l=s.substring(s.lastIndexOf(".")+1,s.length);"jpg"==l&&(l="jpeg");var f="images/".concat(l);c.src=a;var u=Date.now();return new Promise(function(a,t){c.onload=function(){var t=r?r.left:0,e=r?r.top:0,n=r?r.width:c.width,i=r?r.height:c.height,s=t+n,l=e+i;g.height=c.height,g.width=c.width,d.drawImage(c,0,0);var w=d.getImageData(0,0,c.width,c.height),v=d.getImageData(0,0,c.width,c.height),m=4*c.width;w.data.forEach(function(a,n){if(n%4==0){var r=parseInt(n/m),i=n%m/4;if((r>e&&r<l&&i>t&&i<s)!=h){for(var g=[0,0,0,0],d=0,c=i-o;c<i+o+1;c++)for(var f=r-o;f<r+o+1;f++){var u=4*c+f*m;u>0&&u<w.data.length&&(g[0]+=w.data[u],g[1]+=w.data[u+1],g[2]+=w.data[u+2],g[3]+=w.data[u+3],d++)}v.data[n]=g[0]/d,v.data[n+1]=g[1]/d,v.data[n+2]=g[2]/d,v.data[n+3]=g[3]/d}else v.data[n]=w.data[n],v.data[n+1]=w.data[n+1],v.data[n+2]=w.data[n+2],v.data[n+3]=w.data[n+3]}}),d.putImageData(v,0,0);var D=g.toDataURL(f),p=new Date;console.log("処理時間"),console.log(p-u),a(D)},c.onerror=function(a){return t(a)}})}function t(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,e=document.createElement("canvas"),o=e.getContext("2d"),n=new Image,r=a.match(".+/(.+?)([?#;].*)?$")[1],i=r.substring(r.lastIndexOf(".")+1,r.length);"jpg"==i&&(i="jpeg");var h="images/".concat(i);n.src=a;return new Promise(function(a,r){n.onload=function(){e.height=n.height,e.width=n.width,o.drawImage(n,0,0);var r=o.getImageData(0,0,n.width,n.height),i=[],g=[],d=[],c=Date.now();c=Date.now(),console.info("ImageDataを二次元配列化"),r.data.forEach(function(a,t){d.push(a),t%4==3&&(g.push(d),d=[]),t%(4*n.width)==4*n.width-1&&(i.push(g),g=[])});var s=o.getImageData(0,0,n.width,n.height),l=[],f=Date.now();console.log(f-c),console.log("ぼかし処理"),c=Date.now(),i.forEach(function(a,e){a.forEach(function(a,o){if(o>10&&o<510&&e>20&&e<140){for(var r=[],h=e-t;h<e+t+1;h++)for(var g=o-t;g<o+t+1;g++)g>-1&&h>-1&&h<n.width&&g<n.height&&r.push(i[h][g]);for(var d=0;d<4;d++){for(var c=0,s=0;s<r.length;s++)c+=r[s][d];l.push(c/r.length)}}else for(var f=0;f<4;f++)l.push(i[e][o][f])})}),f=Date.now(),console.log(f-c),c=Date.now(),console.info("ImageDataを挿入"),l.forEach(function(a,t){s.data[t]=a}),console.log(f-c),c=Date.now(),console.info("ImageDataを挿入"),o.putImageData(s,0,0);var u=e.toDataURL(h);a(u)},n.onerror=function(a){return r(a)}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.imageBlurProcessing=a,exports.imageBlurProcessing2=t;
},{}],"29du":[function(require,module,exports) {
module.exports="001.a9a17c35.jpg";
},{}],"HJD/":[function(require,module,exports) {
"use strict";var e=require("../../index"),t=require("./../assets/images/001.jpg");new Vue({el:"#app",data:function(){return{beforeImage:"./".concat(t),afterImage:null,processTime:0,isProcessing:!1,size:20,reverse:!1,count:0,crop:{left:0,top:0,width:0,height:0}}},mounted:function(){},created:function(){console.log(t)},methods:{change:function(e){var t=e.coordinates;e.canvas;this.crop=t},blur:function(){this.afterImage=null,this.isProcessing=!0;var t=new Date,r=this.beforeImage,s={size:parseInt(this.size),rect:this.crop,reverse:this.reverse};setTimeout(function(){var n=this;(0,e.imageBlurProcessing)(r,s).then(function(e){var r=new Date;n.processTime=r-t,n.isProcessing=!1,n.afterImage=e})}.bind(this),10)},onFileChang:function(e){var t=new FileReader;this.afterImage=null,t.addEventListener("load",function(e){try{this.beforeImage=e.target.result;var t=new Image;t.src=e.target.result,t.onload=function(){console.log(t.width),console.log()}}catch(r){console.error(r)}}.bind(this)),t.readAsDataURL(e.target.files[0])}}});
},{"../../index":"S3PC","./../assets/images/001.jpg":"29du"}]},{},["HJD/"], null)
//# sourceMappingURL=main.fe97bcc1.js.map